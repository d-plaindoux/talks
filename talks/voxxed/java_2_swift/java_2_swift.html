<!doctype html>
<html lang="en">    
  
  <head>
    <meta charset="utf-8">
    
    <title>De Java à Swift en 2 temps trois mouvements</title>
      
    <meta name="description" content="Présentation du langage Swift avec comme repère Java">
    <meta name="author" content="Didier Plaindoux">
    
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
     
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css" id="theme">
    
    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
      .close {
      background-color:#556677;
      }
      .alert {
      font-size:70% !important;
      color:white;
      text-align:middle !important;
      background-color:#994422;
      padding: 1em 0em 1em 0em !important;
      Box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.4); 
      }
      .remark {
      font-size:70% !important;
      color:white;
      text-align:middle !important;
      background-color:#445566;
      padding: 1em 0em 1em 0em !important;
      Box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.4); 
      }
      .title {
      color:black;
      text-align:middle !important;
      background-color:white;
      padding: 1em 0em 1em 0em !important;
      Box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.4); 
      }
        
        .ribbon {
          position:fixed;
          right: 0px; top:0px;
          z-index: 1;
          overflow: hidden;
          width: 120px; height: 120px;
          text-align: right;
        }
        .ribbon span {
          font-size: 10px;
          font-weight: bold;
          color: #FFF;
          text-transform: uppercase;
          text-align: center;
          line-height: 20px;
          transform: rotate(45deg);
          -webkit-transform: rotate(45deg);
          width: 120px;
          display: block;
          background: #79A70A;
          background: linear-gradient(#F70505 0%, #8F0808 100%);
          box-shadow: 0 3px 10px -5px rgba(0, 0, 0, 1);
          position: absolute;
          top: 24px; right: -26px;
        }
    </style>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  
  <body>
    <div class="reveal">
      <div class="slides">
	<section>
	  <h2>De Java à Swift <br> en 2 temps <br> trois mouvements</h2>
	  <br/>
	  <div class="p" style="text-align:middle">22 juin 2017</div>
	  <div class="p" style="text-align:middle">Voxxed Luxembourg</div>
	  <div class="p" style="text-align:middle">
	    <span>
	      <a href="http://d.plaindoux.free.fr">Didier Plaindoux</a>
	      (<a href="http://twitter.com/dplaindoux">@dplaindoux</a>)
	    </span> 
	  </div>
	</section>

	<!-- section style="background:#2255AA">
	  <div class="ribbon"><span>Avertissement</span></div>

	  <h2 style="color:#FFFFFF">Attention <br> ce Tlak n'est pas <br> un Tlak sur <br> le devleoppement iOS</h2>

	  <p style="color:#FFFFFF">Merci de votre compréhension</p>
	</section -->

	<section>
	  <table>
	    <tr>
	      <td align="center"><b>Freelance</b></td>
	      <td align="center"><b>Computer scientist</b></td>
	    </tr>
	    <tr>
	      <td width="50%" align="center"><img class="plain" src="images/fungus.png" width='45%'></img></td>
	      <td width="50%" align="center"><span style="font-size:500%">&lambda;</span></td>
	    </tr>
	  </table>
	  <br>
	  <table width="35%">
	    <tr>
	      <td align="center" style="background:white">
		<img class="plain" style="background:white" src="images/devfest.png" width='80%'></img>
	      </td>
	    </tr>
	  </table>
	</section>

	<section>

	  <h2>"Google considérerait <br> Swift comme un <br> langage de première classe"</h2>

	</section>


	<section>

	  <h2>"Google considère <br> Kotlin comme un <br> langage de première classe"</h2>

	</section>

	<section>
	  <h3> Historique de Swift </h3>

	  Développement lancé en 2010 par Chris Lattner

	  <ul>
	    <li><div class="fragment"> <b>v1.0</b>: Dévoilé durant la WWDC en 2014 </div> </li>
	    <li><div class="fragment"> <b>v2.0</b>: Ouverture du compilateur en 2015</div> </li>
	    <li><div class="fragment"> <b>v3.0</b>: Publication en septembre 2016</div> </li>
	    <li><div class="fragment"> <b>v4.0</b>: Publication prévue pour fin 2017</div> </li>
	  </ul>
	</section>
	
	<section>
	  <h3> Développer avec Swift </h3>

	  <table width='100%'>
	    <tr>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" src="images/apple-logo.png"></img>
		<br>
		XCode
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" width="50%" src="images/jetbrains.jpg"></img>
		<br>
		CLion, AppCode
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img width="48%" src="images/hipster.png"></img>
		<br>
		Vi, Emacs, Atom etc.
	      </td>
	    </tr>
	  </table>

	</section>
	
	<section>
	  <h3> Exécuter avec Swift </h3>

	  <table width='100%'>
	    <tr>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" src="images/apple-logo.png"></img>
		<br>
		iOS, OSX
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" src="images/ubuntu-logo14.png"></img>
		<br>
		Version 14.04+ 
		<br>
		(Docker)
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" width="70%" src="images/ibm-swift-sandbox.png"></img>
		<br>
		IBM Cloud 
		<br>
		(LinuxOne)
	      </td>
	    </tr>
	  </table>

	</section>
	
	<section>
	  <h3> Partager avec Swift </h3>

	  <table width='100%'>
	    <tr>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img width="67%" class="plain" src="images/cocoapods.png"></img>
		<br>
		CocoaPods
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img class="plain" src="images/carthage.jpeg"></img>
		<br>
		Carthage
	      </td>
	      <td width="33%" align="center" valign="middle" class="fragment">
		<img width="73%" class="plain" src="images/swift.png"></img>
		<br>
		Swift Package
	      </td>
	    </tr>
	  </table>

	</section>
	
	<section>
	  <h3> Langage inspiré par ... </h3>

	  <table width='100%'>
	    <tr>
	      <td width="33%" align="center" valign="middle" class="plain fragment">
		<div class="title"> Objective-C<br>C# </div>
		<div class="remark"> Orienté Objet </div>
	      </td>
	      <td width="33%" align="center" valign="middle" class="plain fragment">
		<div class="title"> Haskell<br>OCaml </div>
		<div class="remark"> Fonctionnel </div>
	      </td>
	      <td width="33%" align="center" valign="middle" class="plain fragment">
		<div class="title"> Ruby<br>Python </div>
		<div class="remark"> Expressivité </div>
	      </td>
	    </tr>
	  </table>

	  <table width='100%'>
	    <tr>
	      <td width="66%" align="center" valign="middle" class="plain fragment">
		<div class="remark"> Système de typage </div>
	      </td>
	      <td width="33%" align="center" valign="middle" class="plain"></td>
	    </tr>
	  </table>
	</section>

	<section>
	  <h3> Métamorphose d'une classe Java </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Java">
public class Personne {
  final String nom;
  int age;

  public Personne(String nom, int age) {
    this.nom = nom;
    this.age = age;
  }

  public void anniversaire() {
    this.age += 1;
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Elimination des séparateurs </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Java">
public class Personne {
  final String nom
  int age

  public Personne(String nom, int age) {
    this.nom = nom
    this.age = age
  }
  
  public void anniversaire() {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Attributs immutables ... ou pas </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Java Swift">
public class Personne {
  let nom:String // Constant
  var age:Int    // Variable

  public Personne(String nom, int age) {
    this.nom = nom
    this.age = age
  }

  public void anniversaire() {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Paramètres </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Java Swift">
public class Personne {
  let nom:String
  var age:Int

  public Personne(nom:String, age:Int) {
    this.nom = nom
    this.age = age
  }

  public void anniversaire() {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Initialisation </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Java Swift">
public class Personne {
  let nom:String
  var age:Int

  public init(nom:String, age:Int) {
    this.nom = nom
    this.age = age
  }

  public void anniversaire() {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Fonction </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Swift Java">
public class Personne {
  let nom:String
  var age:Int

  public init(nom:String, age:Int) {
    this.nom = nom
    this.age = age
  }

  public func anniversaire() -> Void {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Fonction ou ... fonction </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Swift Java">
public class Personne {
  let nom:String
  var age:Int

  public init(nom:String, age:Int) {
    this.nom = nom
    this.age = age
  }

  public func anniversaire() {
    this.age += 1
  }
}
	  </code></pre>
	</section>

	<section>
	  <h3> Une classe Swift </h3>
	  <pre><code style="font-size:80%"  data-trim data-noescape class="Swift">
public class Personne {
  let nom:String
  var age:Int

  public init(nom:String, age:Int) {
    self.nom = nom
    self.age = age
  }

  public func anniversaire() {
    self.age += 1
  }
}
	  </code></pre>
	</section>

	<!-- Données et Types initiaux -->

	<section>
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <h3> Survol du langage </h3>
	</section>

	<section>
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <h3> Données, Types initiaux, Contrôle </h3>
	  <p style="opacity:0.10"> Le Fonctionnel </p>
	  <p style="opacity:0.05"> Les Objets </p>
	</section>
	<section>
	    <h3> Variables ou Constantes </h3>

	    <table width="100%">
	      <tr>
		<td width="50%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  class="Java"> int age </code></pre>
		  <pre><code style="font-size:80%"  class="Java"> final String nom </code></pre>
		</td>
		<td class="fragment">
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  class="swift"> var age:Int </code></pre>
		  <pre><code style="font-size:80%"  class="swift"> let nom:String </code></pre>
		</td>
	      </tr>
	    </table>

	</section>

	<section>
	    <h3> Les collections </h3>

	    <table width="100%">
	      <tr>
		<td width="65%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
Arrays.asList("Hello", "World")
		  </code></pre>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
Map&lt;String, Integer> m = new HashMap<>();
m.put("A", 10);
m.put("B", 20); </code></pre>
		</td> 
		<td class="fragment">	   
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
["Hello", "World"]
		  </code></pre>

		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
["A":10, "B":20]
		  </code></pre>
		</td>
	      </tr>
	    </table>	    

	    <div style="font-size:70%" class="fragment">
	      Fonctions disponibles map, flatMap, filter etc.
	    </div>

	</section>

	<section>
	    <h3> Donnée Optionnelle </h3>

	    <table width="100%">
	      <tr>
		<td width="50%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
Optional&lt;String> n = 
    Optional.of("Hello");

Optional&lt;Integer> t = 
    n.map(v -> v.length());

if (t.isPresent()) {
     // t.get(); &#x1F612; 
}
		  </code></pre>
		</td> 
		<td class="fragment">	   
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let n:String? = 
    "Hello" // ou nil

let t:Int? = 
    n?.characters.count 

if let taille = t { 
   // cas taille &ne; nil &#x1F60F;  
}
		  </code></pre>
		</td>
	      </tr>
	    </table>	    

	    <div style="font-size:70%" class="fragment alert">
	      Donnée optionnelle "portée" par le typage &rArr; non structurel
	    </div>

	    <br>

	    <div style="font-size:70%" class="fragment">
	      Fonctions disponibles map, flatMap, filter etc.
	    </div>

	</section>
	    
	<section>
	    <h3> Tuples </h3>
	    
	    <table width="100%">
	      <tr>
		<td width="30%">
		  <h5>Java</h5>
		  &emptyset;
		</td> 
		<td class="fragment">	   
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
(42, "John Doe") // (Int, String)
(42, "John Doe").1 == "John Doe"
		  </code></pre>

		  <div class="fragment">
		    <div style="font-size:70%"> Index &leftrightarrow; Nom  </div>
		    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
(42, nom:"John Doe") // (Int, String)
(42, nom:"John Doe").1   == "John Doe"
(42, nom:"John Doe").nom == "John Doe"
		    </code></pre>
		  </div>
		</td>
	      </tr>
	    </table>
	</section>


	<section>
	    <h3> Structures de contrôle </h3>

	  <table width="100%">
	    <tr class="fragment">
	      <td width="40%">
		<div style="font-size:70%">
		  Répétition
		</div>
	      </td>
	      <td>	
		<pre><code style="font-size:80%"  data-trim data-noescape class="swift">   
let segment = 0..<100
for index in segment { 
  // bloc répété
}		 
		</code></pre>
		</div>	    
	      </td>
	    </tr>
	    <tr class="fragment">
	      <td width="40%">
		<div style="font-size:70%">
Garde pour les optionnels
		</div>
	      </td>
	      <td>
		<pre><code style="font-size:80%"  data-trim data-noescape class="swift">   
guard let valeur = expression else {
   // valeur n'est pas définie
}

// valeur est définie
		</code></pre>
	      </td>
	    </tr>
	  </table>
	</section>

	<!-- Les Fonctions -->

	<section>
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <p style="opacity:0.15"> Données, Types initiaux etc.</p>
	  <h3> Le Fonctionnel </h3>
	  <p style="opacity:0.15"> Les Objets </p>
	</section>
	
	<section>
	    <h3> Type Fonctionnel </h3>

	    <table width="100%">
	      <tr>
		<td width="50%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="java"> 
Function&lt;A,B> 
Supplier&lt;B> 
Consumer&lt;A> 
Predicate&lt;A>
...
		  </code></pre>
<center style="font-size:60%">"Execution in the Kingdom of Nouns" <br> S. Yegge</center>
		</td>
		<td class="fragment">
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%" data-trim data-noescape class="swift"> 
(A) -> B 
()  -> B
(A) -> ()
(A) -> Bool
...
		  </code></pre>

		  <div class="fragment">
		    <div style="font-size:70%">
		      Type aliasing
		    </div>
		    <pre><code style="font-size:80%"  data-trim data-noescape class="swift"> 
typealias Function&lt;A,B> = (A) -> B
typealias Supplier&lt;B>   = ()  -> B
...
		    </code></pre>
		  </div>
		</td>
	      </tr>
	    </table>
	   
	</section>
		
	<section>
	    <h3> Fonction </h3>
	    <pre><code style="font-size:80%"  data-noescape class="swift">
  func Nom(Parametres) -> Type Resultat { Corps De La Fonction }	    	 
	    </code></pre>
	</section>
		
	<section>
	    <h3> Fonction :: Paramètres</h3>
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
func multiplier(a:Int, b:Int) -> Int { return a * b }
	      </code></pre>

	    <div class="fragment" style="font-size:70%">
	      En interne les noms des paramètres capturent les valeurs
	    </div>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
multiplier(a:2, b:3)
	    </code></pre>


	    <div class="fragment" style="font-size:70%">
	      En externe les noms des paramètres identifient les arguments
	    </div>

	    <br>

	    <div class="b fragment alert">
	      Permutation des arguments interdite
	    </div>
	</section>
		
	<section>
	    <h3> Fonction :: Nom externe spécifique </h3>

	    <div style="font-size:70%"> 
	      Spécification d'un nom externe différent
	    </div>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
&plusb; ...

func multiplier(a:Int, <span class="close"> par </span> b:Int) -> Int { 
  return multiplier(a:a, b:b)
}
	    </code></pre>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
multiplier(a:2, b:3)
multiplier(a:2, par:3)
	    </code></pre>

	</section>

	<section>
	    <h3> Fonction :: Aucun Nom externe </h3>

	    <div style="font-size:70%">
	      Spécification afin de ne pas avoir de nom externe
	    </div>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
&plusb; ...

func multiplier(<span class="close b"> _ </span> a:Int, par b:Int) -> Int { 
  return multiplier(a:a, b:b)
}
	    </code></pre>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
multiplier(a:2, b:3)
multiplier(a:2, par:3)
multiplier(2, par:3)
	    </code></pre>

	    <br>

	    <div class="b fragment alert">
	      Surcharge de méthode relative aux noms externes !
	    </div>
	</section>
			
	<section>
	    <h3> Fonction :: Closure </h3>

	    <table width="100%">
	      <tr>
		<td width="100%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="java"> 
[Parametres] -> [Corps De La Fonction]
		  </code></pre>
		</td>
	      </tr>
	      <tr>
		<td class="fragment">
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
{ [Parametres] -> [Type Retour] in [Corps De La Fonction] }
{ [Parametres] in [Corps De La Fonction] }
		  </code></pre>
	      </tr>
	    </table>

	    <br>

	    <div style="font-size:70%" class="remark fragment">
	      Objet de Première Classe
	    </div>	    
	</section>

	<section>
	    <h3> Closure :: Exemple </h3>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let multiplier = { (a:Int, b:Int) -> Int in a * b }
	    </code></pre>

	    <div class="fragment">
	      <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
multiplier(2,3)
	      </code></pre>

	      <div style="font-size:70%">
		Pas de sélection par nommage des paramètres car inutile !
	      </div>	    
	    </div>	    

	</section>

	<section>
	    <h3> Closure :: Synthèse de Type </h3>
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let multiplier = { (a:Int,b:Int) in a * b }
let multiplier = { (a,b:Int) in a * b }
let multiplier = { a,b -> Int in a * b }

// (Int, Int) -> Int
	    </code></pre>
	</section>
	<section>
	    <h3> Closure :: Synthèse de Type </h3>
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let multiplier = { a,b in a * b }

<mark>error</mark> ambiguous use of operator '*'
	    </code></pre>

	    <div style="font-size:70%">Int ? Float ? Double ? ...</div>	    
	</section>

	<section>
	    <h3> Closure :: Vérification de Type </h3>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let multiplier : (Int,Int) -> Int = { a,b in a * b }
	    </code></pre>

	    <div style="font-size:70%">
	      Spécification et Mise en oeuvre séparées
	    </div>	    
	</section>

	<section>
	    <h3> Fonction :: Ordre Supérieur </h3>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
func appliquer(_ f:(Int) -> Int, _ a:Int) -> Int {
  return f(a)
}

// appliquer(f,a) &longrightarrow;* f(a)
	    </Code></pre>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
func curry(_ f:@escaping (Int,Int) -> Int) -> (Int) -> (Int) -> Int {
  return { a in { b in f(a,b) } }
}

// f(1,2) &equiv; curry(f)(1)(2)
	    </Code></pre>

	    <br>

	    <div class="alert fragment" style="font-size:70%">
	      Forme  restreinte au type <tt>Int</tt> !
	    </div>

	</section>

	<section>
	    <h3> Fonction :: Généricité </h3>

	    <div style="font-size:70%">
	      Paramétrisation à la C++, Java, C#
	    </div>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
func appliquer&lt;A,B>(_ f:(A) -> B, _ a:A) -> B { return f(a) } 
	    </code></pre>

	    <div class="fragment">
	      <div style="font-size:70%">
		Possibilité de spécifier des contraintes
	      </div>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
func estEgal&lt;A:Equatable>(_ a:A, _ b:A) -> Bool { return a == b } 
	    </code></pre>
	    </div>	    

	</section>

	<section>
        
	  <div class="ribbon"><span>Mode &#9785;</span></div>
        
	  <h3> Pièces manquantes &amp;  Inconsistance </h3>
	  
	  <table width="100%">
	    <tr class="fragment">
	      <td width="40%">
		<div style="font-size:70%">
		  Récursivité terminale
		</div>
	      </td>
	      <td>
		<div style="font-size:70%" class="alert">
		  &nbsp; Non garantie par le compilateur
		</div>
	      </td>
	    </tr>
	    <tr class="fragment">
	      <td width="40%">
		<div style="font-size:70%">
		  Compréhension
		</div>
	      </td>
	      <td>
		<div style="font-size:70%" class="alert">
		  &nbsp; Concept inexistant
		</div>	    
	      </td>
	    </tr>
	    <tr class="fragment">
	      <td width="40%">
		<div style="font-size:70%">
f &rArr; { x in f(x) }
                </div>
	      </td>
	      <td>
		<div style="font-size:70%" class="alert">
		  &nbsp;  &eta;-expansion mais pas de &eta;-reduction
		</div>	    
	      </td>
	    </tr>
	  </table>
        
	</section>

	<!-- LES OBJETS -->

	<section>
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <p style="opacity:0.10"> Données, Types initiaux etcs. </p>
	  <p style="opacity:0.15"> Le Fonctionnel </p>
	  <h3> Les Objets </h3>
	</section>

	<section>
	  <h2>école Scandinave</h2>
	  <p> Simula, C++, Objective-C, Eiffel, Java, C# ... <b> Swift </b> </p>

	  <p style="font-size:70%">Abstraction de donnée &leftrightarrow; Classe &leftrightarrow; Type</p>
	  <p style="font-size:70%">Repose sur un Typage Statique</p>
	</section>
	
	<section>
	  <h3> Paradigme Objet </h3>

	    <table width="100%">
	      <tr>
		<td width="50%">
		  <h5>Java</h5>		 
		</td>
		<td>
		  <h5>Swift</h5>
		</td>
	      </tr>
	      <tr class="fragment">
		<td width="50%">
		  Interface
		</td>
		<td>
		  Protocole
		</td>
	      </tr>
	      <tr class="fragment">
		<td width="50%">
		  Classe
		</td>
		<td>
		  Classe
		</td>
	      </tr>
	      <tr class="fragment">
		<td width="50%">
		  &emptyset;
		</td>
		<td>
		  Structure
		</td>
	      </tr>
	      <tr class="fragment">
		<td width="50%">
		  Enumération
		</td>
		<td>
		  Variants
		</td>
	      </tr>
	    </table>

	</section>

	<section>
	  <h3> Protocole </h3>
	  
	  <ul>
	    <li> Base de connaissances	</li>
	    <li> Extension<sup>2</sup> de Protocoles </li>
	  </ul>

	</section>

	<section>
	  <h3> Protocole :: Base de connaissances </h3>
	  
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
protocol Population {
  func elements() -> [Personne]
  func recherche(nom:String) -> Personne?
}
	    </code></pre>	  

	</section>

	<section>
	  <h3> Protocole :: Mise en oeuvre </h3>	 
	  
	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
extension Population {
  func recherche(nom:String) -> Personne? {
     return elements().filter{ p in p.nom == nom }.first
  }
}
	  </code></pre>	  

	  <div class="fragment" style="font-size:70%">
	    Assimilable au "<tt>default</tt>" des interfaces dans Java 8
	  </div>

	  <br>

	  <div class="remark fragment">
	    Idem pour les classes, structures et enumérations
	  </div>

	</section>

	<section>
	  <h3> Protocole :: Généricité </h3>	 

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
protocol Ensemble {
  associatedtype E
  
  <span class="fragment">func elements() -> [E] </span>
}
	  </Code></pre>	  

	  <br>

	  <div class="alert">
	    Spécification de Type Membre &nequiv; Paramétrisation
	  </div>	

	</section>

	<section>
	  <h3> Protocole :: Extension & Spécialisation </h3>	 

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
protocol Population: Ensemble {
  typealias E = Personne
  
  func recherche(nom:String) -> Personne?
}
	  </Code></pre>	  

	  <br>

	  <div class="alert fragment">
	    Spécification de la spécialisation par le <tt>typealias</tt> 
	  </div>	

	</section>

	<section>
	  <h3> Classe </h3>

	  <ul>
	    <li> Etat interne </li>
	    <li> Base de connaissances </li>
	    <li> Héritage simple </li>
	    <li> Mise en oeuvre de Protocoles </li>
	  </ul>

	</section>

	<section>
	  <h3> Classe :: Etat interne & Initialisation </h3>
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
publi class Personne {
  private let nom:String
  private var age:Int

  public init(nom:String, age:Int) {
    self.nom = nom
    self.age = age
  }
}
	    </code></pre>

	    <div class="fragment">
	      <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
Personne(nom:"John Doe", age:42)
	      </code></pre>

	      <div class="alert">
		Pas de mot clé <tt>new</tt> cf. Python, Kotlin etc.
	      </div>	    
	    </div>	    
	</section>
	
	<section>
	    <h3> Classe :: Initialisation & optionnel </h3>

	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public class Personne {
  private let nom:String
  private var age:Int

  public init?(nom:String, age:Int) {
    guard age > -1 else { return nil } // if age < 0 { return nil }

    self.nom = nom
    self.age = age
  }
}
	    </code></pre>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
let personne:Personne? = Personne(nom:"John Doe", age:-1) // i.e. nil
	    </code></pre>

	</section>

	<section>
	    <h3> Classe :: Base de connaissances </h3>

	  <table width="100%">
	    <tr class="fragment">
	      <td width="30%">
		<div style="font-size:70%">
Méthode d'instance (surchargeable)
		</div>
	      </td>
	      <td>
		<pre><code style="font-size:80%"  data-trim data-noescape class="swift">   
class Personne {
&plusb; ...
  func aPourNom() -> String { return self.nom }
}
		</code></pre>
	      </td>
	    </tr>
	    <tr class="fragment">
	      <td width="30%">
		<div style="font-size:70%">
Méthode statique (non surchargeable)
		</div>
	      </td>
	      <td>
		<pre><code style="font-size:80%"  data-trim data-noescape class="swift">   
class Personne {
&plusb; ...
  static func new(nom:String) -> Personne {...}
}
		</code></pre>
	      </td>
	    </tr>
	    <tr class="fragment">
	      <td width="30%">
		<div style="font-size:70%">
Méthode de classe (surchargeables)
		</div>
	      </td>
	      <td>	
		<pre><code style="font-size:80%"  data-trim data-noescape class="swift">   
class Personne {
&plusb; ...
  class func new(nom:String) -> Personne {...}
}
		</code></pre>
		</div>	    
	      </td>
	    </tr>
	  </table>
	</section>
	    
	<section>
	    <h3> Classe :: Reference Type </h3>
	    <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public class Personne {
  private let nom:String
  private var age:Int

&plusb; public init(nom:String, age:Int) <close>{ ... }</close>
}
	    </code></pre>

	    <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
let personne1 = Personne(nom:"John Doe", age:42)
let personne2 = personne1
	    </code></pre>

	    <div class="fragment alert" style="font-size:70%">
	      <tt>personne1</tt> et <tt>personne2</tt> référencent la même donnée en mémoire
	    </div>

	</section>

	<section>
	  <h3> Structure </h3>

	  <ul>
	    <li> Etat interne
	    <li> Base de connaissances	  
	    <li> Pas d'héritage 
	    <li> Mise en oeuvre de Protocoles
	  </ul>

	</section>


	<section>
	  <h3> Structure :: Initialisation </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public struct Personne {
  let nom:String
  var age:Int
}
	  </Code></pre>	  	  

	    <div style="font-size:70%">
	      Méthode <tt>init</tt> implicite. Redéfinition possible.
	    </div>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
Personne(nom:"John Doe", age:42)
	  </Code></pre>	  	  

	</section>

	<section>
	  <h3> Structure :: Reference Value </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
let personne1 = Personne(nom:"John Doe", age:42)
var personne2 = personne1

personne2.age += 1

// personne1.age == 42
// personne2.age == 43
	  </Code></pre>	  	  

	  <br>

	  <div class="fragment alert" style="font-size:70%">
	    <tt>personne1</tt> et <tt>personne2</tt> ne référencent pas la même donnée en mémoire
	  </div>

	</section>

	<section>
	  <h3> Enumération </h3>

	  <ul>
	    <li> Spécification de formes
	    <li> Etat interne
	    <li> Base de connaissances	  
	    <li> Mise en oeuvre de Protocoles
	  </ul>

	</section>

	<section>
	  <h3> Enumération :: Spécification de formes </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public enum StadePersonne {
  case Enfant, Adolescent, Adulte
}
	  </Code></pre>	  	  

	  <pre class="fragment"><code style="font-size:80%"  data-trim data-noescape class="swift">
let s : StadePersonne = .Adolescent

switch s {
  case .Enfant: // ...
  case .Adolescent: // ...
  case .Adulte: // ...
}
	  </Code></pre>	  	  

	    <div class="fragment alert" style="font-size:70%">
	      Le <tt>switch/case</tt> doit être exhaustif i.e. vérifié à la compilation
	    </div>

	</section>


	<section>
	  <h3> Enumération :: <tt>switch</tt> avancé </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public enum PeutEtre&lt;T> {
  case QuelqueChose(value:T), Rien

  <span class="fragment">public func get(_ valeurParDefaut:T) -> T {
     switch self {
       case .QuelqueChose(let v): return v
       case _:                    return valeurParDefaut
     }
  }</span>
}</Code></pre>	  	  

	    <div class="fragment remark" style="font-size:70%">
	      Pattern Matching
	    </div>

	</section>

	<section> 
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <h3> Le type <b>Self</b> </h3>
	</section>

	<section> 
	  <h3> <span style="text-transform: lowercase;">self</span> : <span style="text-transform: capitalize;">Self</span> </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
public class Personne {
  private let nom:String
  private var age:Int

&plusb;  public init(nom:String) <span class="close">{ ... }</span>

  <span class="fragment">public func anniversaire() -> Self {
    self.age += 1
    return self
  }</span>
}
	  </Code></pre>	  

	    <div class="fragment" style="font-size:70%">
	      Le type Self dénote le type de l'objet courant à savoir ... self
	    </div>

	</section>

	<section> 
	  <h3> Dénotation du type courant </h3>

	    <table width="100%">
	      <tr>
		<td width="60%">
		  <h5>Java</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="java">
interface 
  Copiable&lt;Self extends Copiable&ltSelf>> 
{
  Self copie();
}
		  </code></pre>
		</td> 
		<td class="fragment">	   
		  <h5>Swift</h5>
		  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
protocol Copiable {
  func copie() -> Self
}
		  </code></pre>
		</td>
	      </tr>
	    </table>	    
	    
	    <div class="fragment" style="font-size:70%">
	      F-Bounded quantification polymorphism vs. Self type
	    </div>

	</section>

	<section> 
	  <h3> Self :: Copiable </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
class Personne : Copiable {
  private let nom:String
  private var age:Int

  <span class="fragment">func copie() -> Self {
     return type(of:self).init(nom:self.nom, age:self.age)
  }</span>

  <span class="fragment">required init(nom:String, age:Int) {
    self.nom = nom
    self.age = age
  }</span>
}
	  </Code></pre>	  

	    <div style="font-size:70%" class="fragment">
	      <u>required</u> force l'existence dans les sous-classes
	    </div>	

	</section>

	<section> 
	  <h3> Self :: Initialisation </h3>

	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
class Personne {
  private let nom:String

  required init(nom:String) {
    self.nom = nom
  }

  <span class="fragment">func new(nom:String) -> Self {
     return type(of:self).init(nom:nom) // self &lt;: instance de Personne
  }</span>

  <span class="fragment">class func new(nom:String) -> Self {
     return self.init(nom:nom) // self &lt;: classe Personne
  }</span>
}
	  </Code></pre>	  

	    <div style="font-size:70%" class="fragment">
	      Le <tt>new</tt> de Perl ? Presque !
	    </div>		  

	</section>

	<section> 
	  <img class="plain" width="15%" src="images/swift.png">	  
	  <h3>Pour aller un peu plus loin !</h3> 
	</section>

	<section> 
	  <h3>Programmation orientée Protocol</h3> 
	  <pre><code style="font-size:80%"  data-trim data-noescape class="swift">
&plusb; protocol Individu { ... }
&plusb; extension Individu { ... }
<span class="fragment">&plusb; extension Individu : Externalisable { ... }</span>
<span class="fragment">&plusb; extension Individu where Self : Externalisable { ... }</span>
	  </code></pre>	  	  

	  <br>

	  <div style="font-size:70%" class="fragment remark">
	    "Cake Pattern" de Scala
	  </div>
	  <div style="font-size:70%" class="fragment remark">
	    Composition de protocol en Swift 4.0 i.e. <tt> Type & Type </tt>
	  </div>		  
	</section>

	<section> 
	  <h3> Un tour d'horizon rapide ... </h3>
	  <ul>
	    <li> Gestion des erreurs </li>
	    <li> Structure & Mutation </li>
	    <li> Notion de module </li>
	    <li> Protocole et "Associated Type"</li>
	    <li> etc ... </li>
	</section>

	<section> 
	  <h3> Pour aller plus loin </h3>
	  <ul>
	    <li> <a href="https://swift.org"> Site officiel </a> </li>
	    <li> <a href="https://github.com/vsouza/awesome-ios"> A curated list of awesome iOS ecosystem </a> </li>
	    <li> <a href="https://www.raywenderlich.com/category/swift"> Blog de raywenderlich.com </a> </li>
	    <li> Lisez du code ! </li>
	  </ul>
	</section>
	
	<section> 
	  <h2> Questions ? </h2>
	</section>	

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>
	
	<script>	  
	  // More info https://github.com/hakimel/reveal.js#configuration
	  Reveal.initialize({
          controls: false,
          progress: false,
          history: true,
          center: true,
	  slideNumber: true,
          transition: 'none', // none/fade/slide/convex/concave/zoom

          // More info https://github.com/hakimel/reveal.js#dependencies
          dependencies: [
              { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
              { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
              { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: 'plugin/zoom-js/zoom.js', async: true },
              { src: 'plugin/notes/notes.js', async: true }
          ]
	  });	  
	</script>
</body>
</html>


